    <!doctype html>
    <html lang="en" data-theme='dark'>
        <head>
            <meta charset='utf-8'>
            <meta name='viewport' content='width=device-width,initial-scale=1'>
            <meta name="description" content="Origin web application">
            <title>Origin</title>
            <link rel='stylesheet' href='/static/css/pico.min.css'>
            <link rel='stylesheet' href='/static/css/material-icons.css'>
            <link rel='stylesheet' href='/static/css/material-symbols.css'>
            <link rel='manifest' href='/static/manifest.json'>
            <link rel='stylesheet' href='/static/css/style.css'>
            <link rel="icon" type="image/png" href="/static/img/logo.png">
            <script>
                try {
                    const t = localStorage.getItem('theme');
                    if (t === 'light' || t === 'dark') {
                        document.documentElement.dataset.theme = t;
                    }
                } catch {}
            </script>
            <script>window.API_BASE = {{ api_base | tojson }};</script>
            <script src="/static/js/http.min.js" defer></script>
            <script src="/static/js/api.min.js" defer></script>
            <script src="/static/js/tournaments.min.js" defer></script>
            <script src="/static/js/auth.min.js" defer></script>
            <script src="/static/js/settings.min.js" defer></script>
            <script src="/static/js/pwa.min.js" defer></script>
            <script src="/static/js/app.min.js" defer></script>
        </head>
        <body>
            <div id='install-banner' class='container-fluid' hidden>
                <p>Install this app for a better experience.</p>
                <button id='install-button' type='button'>Install</button>
                <button id='install-close-button' type='button' class='close-button banner-close' aria-label='Close'>
                    <span class='material-icons'>close</span>
                </button>
            </div>
            <main class='container'>
                <section id='login-section'>
                    <form id='login-form'>
                        <h1>Log In</h1>
                        <label for='login-email'>Email address</label>
                        <input id='login-email' name='email' type='email' placeholder='Email address' autocomplete='username' required />
                        <label for='login-password'>Password</label>
                        <input id='login-password' name='password' type='password' placeholder='Password' autocomplete='current-password' required />
                        <small>Forgot your password? <a href='/reset-password'>Reset password</a></small>
                        <div class='grid'>
                            <button type='submit'>Log In</button>
                            <button id='create-account-btn' type='button' class='secondary'>Create Account</button>
                        </div>
                        <span id='login-error' class='error'></span>
                    </form>
                </section>
                <dialog id='delete-dialog'>
                    <article>
                        <h3>Delete Account</h3>
                        <p>Are you sure you want to delete your account?</p>
                        <footer class='grid'>
                            <button id='confirm-delete-btn' class='contrast'>Delete</button>
                            <button type='button' onclick="document.getElementById('delete-dialog').close()" class='secondary'>Cancel</button>
                        </footer>
                    </article>
                </dialog>
                <dialog id='password-dialog'>
                    <article>
                        <h3>Change Password</h3>
                        <form id='password-form'>
                            <label for='account-password'>New password</label>
                            <input id='account-password' name='new-password' type='password' placeholder='New password' autocomplete='new-password' required />
                            <footer class='grid'>
                                <button type='submit'>Change</button>
                                <button id='password-cancel' type='button' class='secondary'>Cancel</button>
                            </footer>
                        </form>
                    </article>
                </dialog>
                <section id='loggedin-section' style='display:none;'>
                    <nav id='navbar' class='container-fluid'>
                        <ul>
                            <li><a href='#' data-page='achievements' class='secondary' title='Achievements' aria-label='Achievements'>
                                <span class='material-symbols-outlined'>beenhere</span>
                            </a></li>
                            <li><a href='#' data-page='tournaments' class='secondary' title='Tournaments' aria-label='Tournaments'>
                                <span class='material-icons'>emoji_events</span>
                            </a></li>
                            <li>
                                <picture>
                                    <source srcset='/static/img/logo.webp' type='image/webp'>
                                    <img id='profile-avatar' src='/static/img/logo.png' alt='Profile picture' style='display:none;'>
                                </picture>
                            </li>
                            <li><a href='#' data-page='friends' class='secondary' title='Friends' aria-label='Friends'>
                                <span class='material-icons'>group</span>
                            </a></li>
                            <li><a href='#' data-page='settings' class='secondary' title='Settings' aria-label='Settings'>
                                <span class='material-icons'>settings</span>
                            </a></li>
                        </ul>
                    </nav>
                    <section id='achievements' class='page' style='display:none;'>
                        <h2>Trophies</h2>
                        <p>Coming soon...</p>
                    </section>
                    <section id='tournaments' class='page' style='display:none;'>
                        <h2>Tournaments</h2>
                        <button id='create-tournament-btn'>Create Tournament</button>
                        <section id='tournament-filters' style='margin-top:1rem;'>
                            <h3>Filter</h3>
                            <div id='tournament-filter-buttons' role='group'>
                                <button class='tournament-filter-btn secondary' data-range='today'>Today</button>
                                <button class='tournament-filter-btn secondary' data-range='next7'>Next 7 Days</button>
                                <button class='tournament-filter-btn secondary' data-range='next30'>Next 30 Days</button>
                                <button class='tournament-filter-btn secondary' data-range='all'>All</button>
                            </div>
                        </section>
                        <section id='my-tournaments'>
                            <h3>My Tournaments</h3>
                            <ul id='owned-tournaments'></ul>
                        </section>
                        <section id='joined-tournaments'>
                            <h3>Joined Tournaments</h3>
                            <ul id='joined-tournaments-list'></ul>
                        </section>
                        <section id='public-tournaments'>
                            <h3>Public Tournaments</h3>
                            <ul id='public-tournaments-list'></ul>
                        </section>
                    </section>
                    <section id='tournament-create' class='page' style='display:none;'>
                        <h2>Create Tournament</h2>
                        <form id='tournament-form'>
                            <label for='tournament-name'>Name</label>
                            <input id='tournament-name' type='text' required>
                            <label for='tournament-start'>Start Time</label>
                            <input id='tournament-start' type='datetime-local' required>
                            <label for='tournament-rules'>Rule Set</label>
                            <select id='tournament-rules'>
                                <option value='single-elimination'>Single Elimination</option>
                                <option value='double-elimination'>Double Elimination</option>
                                <option value='round-robin'>Round Robin</option>
                            </select>
                            <label class='switch'>
                                <input id='tournament-public' type='checkbox'>
                                Public Tournament
                            </label>
                            <label class='switch'>
                                <input id='tournament-invites' type='checkbox'>
                                Allow Invites
                            </label>
                            <footer class='grid'>
                                <button type='submit'>Create Tournament</button>
                                <button type='button' class='secondary' onclick="showPage('tournaments', event)">Cancel</button>
                            </footer>
                        </form>
                    </section>
                    <section id='tournament-manage' class='page' style='display:none;'>
                        <h2>Manage Tournament</h2>
                        <p id='tournament-manage-name'></p>
                        <label class='switch'>
                            <input id='allow-invites' type='checkbox'>
                            Allow Invites
                        </label>
                        <button id='share-tournament' style='display:none;'>Invite Players</button>
                        <h3>Registered Users</h3>
                        <ul id='registered-users'></ul>
                        <h3>Joined Users</h3>
                        <ul id='joined-users'></ul>
                    </section>
                    <section id='tournament-view' class='page' style='display:none;'>
                        <h2 id='tournament-view-name'></h2>
                        <p id='tournament-view-start'></p>
                        <button id='tournament-view-action'>Join Tournament</button>
                    </section>
                    <section id='friends' class='page' style='display:none;'>
                        <h2>Friends</h2>
                        <p>Coming soon...</p>
                    </section>
                    <section id='map' class='page' style='display:none;'>
                        <h2>Nearby Arcades</h2>
                        <p>Coming soon...</p>
                    </section>
                    <section id='shop' class='page' style='display:none;'>
                        <h2>Shop</h2>
                        <p>Coming soon...</p>
                    </section>
                    <section id='inventory' class='page' style='display:none;'>
                        <h2>Inventory / Avatar Builder</h2>
                        <p>Coming soon...</p>
                    </section>
                    <section id='play' class='page' style='display:none;'>
                        <h2>Play a Game</h2>
                        <p>Coming soon...</p>
                    </section>
                    <section id='settings' class='page' style='display:none;'>
                        <h2>Settings</h2>
                        <h3>Appearance</h3>
                        <label class='switch' style='margin-bottom:1rem;'>
                            <input id='theme-toggle' type='checkbox' role='switch' checked>
                            Dark Mode
                        </label>
                        <h3>Account</h3>
                        <button onclick="document.getElementById('password-dialog').showModal()" style='width:fit-content;margin-bottom:0.5rem;'>Change Password</button>
                        <div class='grid' style='grid-template-columns:1fr 1fr;gap:0.5rem;margin-bottom:0.5rem;'>
                            <button onclick='logout()' aria-label='Logout' class='secondary outline' style='display:flex;align-items:center;gap:0.25rem;'>
                                <span class='material-icons'>logout</span><span>Logout</span>
                            </button>
                            <button onclick='openDeleteConfirm()' class='secondary outline'>Delete Account</button>
                        </div>
                        <h3>My Locations</h3>
                        <div id='locations-list'></div>
                        <button id='add-location-btn' style='width:fit-content;margin-bottom:0.5rem;'>Add Location</button>
                        <h3>Machines</h3>
                        <p id='machine-setup-message' class='machine-setup' style='display:none;'>Select a location for your newly claimed machine below.</p>
                        <ul id='machines-list'></ul>
                        <h3>QR Codes</h3>
                        <div id='qr-codes-section' class='qr-codes-section'>
                            <p id='qr-codes-empty' class='empty-state'>Scan one of your QR tags to add it here and assign it to a machine.</p>
                            <ul id='qr-codes-list' class='qr-codes-list'></ul>
                        </div>
                        <p style='text-align:center;margin-top:1rem;font-size:0.9rem;'>Version {{ version }}</p>
                    </section>
                    <section id='location-detail' class='page' style='display:none;'>
                        <h2 id='location-detail-title'>Add Location</h2>
                        <div id='location-view'>
                            <p id='view-address'></p>
                            <a id='view-website'></a>
                            <p id='view-hours'></p>
                            <div id='location-dashboard' class='location-dashboard' style='display:none;'>
                                <p style='margin-bottom:0.5rem;'>Location dashboard:</p>
                                <a id='location-dashboard-link'
                                   style='display:inline-block;margin-bottom:0.5rem;word-break:break-all;'
                                   target='_blank' rel='noopener noreferrer'></a>
                                <div class='grid' style='grid-template-columns:repeat(auto-fit,minmax(10rem,1fr));gap:0.5rem;'>
                                    <button type='button' id='location-dashboard-copy' class='secondary outline'>Copy link</button>
                                    <button type='button' id='location-dashboard-open' class='secondary outline'>Open in new tab</button>
                                    <button type='button' id='location-dashboard-share' class='secondary outline'>Share link</button>
                                </div>
                            </div>
                            <button id='edit-location-btn' style='width:fit-content;margin-bottom:0.5rem;display:none;'>Edit</button>
                        </div>
                        <form id='location-detail-form' style='display:none;'>
                            <input id='detail-name' placeholder='Name' required />
                            <input id='detail-address' placeholder='Address' />
                            <input id='detail-website' type='url' placeholder='Website' />
                            <input id='detail-hours' placeholder='Hours' />
                            <div class='grid' style='grid-template-columns:repeat(auto-fit,minmax(10rem,1fr));gap:0.5rem;'>
                                <button type='submit'>Save</button>
                                <button type='button' id='delete-location-btn' class='secondary outline' style='display:none;'>Delete location</button>
                            </div>
                        </form>
                        <h3>Machines</h3>
                        <ul id='location-machines-list'></ul>
                    </section>
                </section>
                <div id='toast' class='toast' style='display:none;position:fixed;top:1rem;left:50%;transform:translateX(-50%);background:#333;color:white;padding:0.5rem 1rem;border-radius:4px;z-index:2000;max-width:75vw;width:max-content;text-align:center;'></div>
                <div id='account-overlay'>
                    <button id='account-close' class='close-button' aria-label='Close'><span class='material-icons'>close</span></button>
                    <div id='account-actions'>
                        <button id='account-save' aria-label='Save'><span class='material-icons'>save</span></button>
                    </div>
                    <picture>
                        <source srcset='/static/img/logo.webp' type='image/webp'>
                        <img id='account-avatar' src='/static/img/logo.png' alt='Profile picture' style='width:8rem;height:8rem;border-radius:50%;margin:1rem auto 0.5rem;transition:transform 0.3s;'>
                    </picture>
                    <label for='account-screen' style='display:block;margin:0 auto 0.5rem;width:90%;text-align:left;'>
                        <span style='display:block;margin-bottom:0.25rem;'>Screen name</span>
                        <input id='account-screen' type='text' style='width:100%;'>
                    </label>
                </div>
            </main>
        </body>
    </html>
