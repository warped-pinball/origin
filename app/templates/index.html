    <!doctype html>
    <html lang="en" data-theme='dark'>
        <head>
            <meta charset='utf-8'>
            <meta name='viewport' content='width=device-width,initial-scale=1'>
            <meta name="description" content="Origin web application">
            <title>Origin</title>
            <link rel='stylesheet' href='/static/css/pico.min.css'>
            <link rel='stylesheet' href='/static/css/material-icons.css'>
            <link rel='stylesheet' href='/static/css/material-symbols.css'>
            <link rel='manifest' href='/static/manifest.json'>
            <script>
                try {
                    const t = localStorage.getItem('theme');
                    if (t === 'light' || t === 'dark') {
                        document.documentElement.dataset.theme = t;
                    }
                } catch {}
            </script>
            <style>
                .error { color: red; font-size: small; }
                a { text-decoration: underline; }
                #install-dialog { top:10vh; }
                .spinner { display:inline-block; width:1em; height:1em; border:2px solid currentColor; border-right-color:transparent; border-radius:50%; animation:spin 0.75s linear infinite; vertical-align:-0.125em; margin-right:0.25em; }
                @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
                button { text-align:center; }
                :root {
                    --nav-icon-size: 2rem;
                    --nav-gap: 2rem;
                    --nav-max-width: 30rem;
                }
                @media (max-width: 400px) {
                    :root {
                        --nav-icon-size: 1.5rem;
                        --nav-gap: 1rem;
                    }
                }
                @media (max-width: 340px) {
                    :root {
                        --nav-icon-size: 1.2rem;
                        --nav-gap: 0.5rem;
                    }
                }
                #navbar {
                    position:fixed;
                    bottom:0;
                    left:0;
                    width:100%;
                    display:flex;
                    justify-content:center;
                    background:transparent;
                    padding:0.5rem 0;
                }
                #navbar ul {
                    display:flex;
                    gap:var(--nav-gap);
                    list-style:none;
                    margin:0 auto;
                    padding:0 var(--nav-gap);
                    align-items:center;
                    max-width:var(--nav-max-width);
                }
                #navbar a[data-page] {
                    display:flex;
                    align-items:center;
                    justify-content:center;
                }
                #navbar .material-icons {
                    font-size:var(--nav-icon-size);
                    width:var(--nav-icon-size);
                    height:var(--nav-icon-size);
                }
                #profile-avatar {
                    width:calc(var(--nav-icon-size)*4);
                    height:auto;
                    aspect-ratio:1;
                    object-fit:contain;
                }
                #account-overlay {
                    --clip-x:100%;
                    --clip-y:0;
                    position:fixed;
                    left:0;
                    top:0;
                    width:100%;
                    height:100vh;
                    overflow:auto;
                    background:var(--pico-surface,#222);
                    text-align:center;
                    padding-top:2rem;
                    z-index:1000;
                    opacity:0;
                    pointer-events:none;
                    clip-path:circle(0 at var(--clip-x) var(--clip-y));
                    transition:clip-path 0.4s ease,opacity 0.4s ease;
                }
                #account-overlay.show {
                    opacity:1;
                    pointer-events:auto;
                    clip-path:circle(150% at var(--clip-x) var(--clip-y));
                }
                #account-avatar {
                    width:2.5rem;
                    height:2.5rem;
                    border-radius:50%;
                    cursor:pointer;
                    transform:scale(0.5);
                    transition:transform 0.3s;
                }
                #account-overlay.show #account-avatar { transform: scale(1); }
                #account-close {
                    position:absolute;
                    top:0.5rem;
                    right:0.5rem;
                    width:2rem;
                    height:2rem;
                    background:none;
                    border:1px solid currentColor;
                    border-radius:50%;
                    color:inherit;
                    cursor:pointer;
                    padding:0;
                    display:flex;
                    align-items:center;
                    justify-content:center;
                }
                #account-actions {
                    position:absolute;
                    top:0.5rem;
                    right:3rem;
                    display:flex;
                    gap:0.5rem;
                    opacity:0;
                    pointer-events:none;
                    transform:translateX(0.5rem);
                    transition:opacity 0.2s ease, transform 0.2s ease;
                }
                #account-actions.visible {
                    opacity:1;
                    pointer-events:auto;
                    transform:translateX(0);
                }
                #account-save {
                    width:2rem;
                    height:2rem;
                    border-radius:50%;
                    background:var(--pico-primary);
                    border:none;
                    color:var(--pico-on-primary, #fff);
                    display:flex;
                    align-items:center;
                    justify-content:center;
                    transition:background 0.3s;
                    cursor:pointer;
                  }
                  #account-save.saved {
                      background:#15803d;
                  }
                @keyframes fadeIn { from { opacity:0;transform:translateY(-0.25rem); } to { opacity:1;transform:translateY(0); } }
                main.container { padding-bottom:3.5rem; }
            </style>
            <script>window.API_BASE = "{{ api_base }}";</script>
            <script src="/static/js/http.min.js" defer></script>
            <script src="/static/js/api.min.js" defer></script>
            <script src="/static/js/tournaments.min.js" defer></script>
            <script src="/static/js/auth.min.js" defer></script>
            <script src="/static/js/settings.min.js" defer></script>
            <script src="/static/js/app.min.js" defer></script>
        </head>
        <body>
            <main class='container'>
                <h1 id='welcome-title'>Welcome</h1>
                <section id='login-section'>
                    <article>
                        <h2>Login</h2>
                        <form onsubmit='login(event)'>
                            <input id='login-email' type='email' placeholder='Email address' required />
                            <input id='login-password' type='password' placeholder='Password' required />
                            <p style='font-size:0.9rem;'>Forgot your password? <a href='/reset-password'>Reset password</a></p>
                            <footer>
                                <button type='submit'>Log In</button>
                                <button type='button' class='secondary' onclick="location.href='/signup'">Create Account</button>
                            </footer>
                            <span id='login-error' class='error'></span>
                        </form>
                        
                    </article>
                </section>
                <dialog id='install-dialog'>
                    <article>
                        <h3>Install App</h3>
                        <p>Install this app for a better experience.</p>
                        <footer class='grid'>
                            <button id='install-confirm-btn' onclick='installApp()'>Install</button>
                            <button type='button' onclick='closeInstall()' class='secondary'>Not now</button>
                        </footer>
                    </article>
                </dialog>
                <dialog id='delete-dialog'>
                    <article>
                        <h3>Delete Account</h3>
                        <p>Are you sure you want to delete your account?</p>
                        <footer class='grid'>
                            <button id='confirm-delete-btn' class='contrast'>Delete</button>
                            <button type='button' onclick="document.getElementById('delete-dialog').close()" class='secondary'>Cancel</button>
                        </footer>
                    </article>
                </dialog>
                <dialog id='password-dialog'>
                    <article>
                        <h3>Change Password</h3>
                        <form onsubmit='updatePassword(event)'>
                            <input id='account-password' type='password' placeholder='New password' required />
                            <footer class='grid'>
                                <button type='submit'>Change</button>
                                <button type='button' onclick="document.getElementById('password-dialog').close()" class='secondary'>Cancel</button>
                            </footer>
                        </form>
                    </article>
                </dialog>
                <section id='loggedin-section' style='display:none;'>
                    <nav id='navbar' class='container-fluid'>
                        <ul>
                            <li><a href='#' data-page='achievements' class='secondary' onclick="showPage('achievements', event)">
                                <span class='material-symbols-outlined'>beenhere</span>
                            </a></li>
                            <li><a href='#' data-page='tournaments' class='secondary' onclick="showPage('tournaments', event)">
                                <span class='material-icons'>emoji_events</span>
                            </a></li>
                            <li>
                                <picture>
                                    <source srcset='/static/img/logo.webp' type='image/webp'>
                                    <img id='profile-avatar' src='/static/img/logo.png' alt='Profile picture' style='display:none;'>
                                </picture>
                            </li>
                            <li><a href='#' data-page='friends' class='secondary' onclick="showPage('friends', event)">
                                <span class='material-icons'>group</span>
                            </a></li>
                            <li><a href='#' data-page='settings' class='secondary' onclick="showPage('settings', event)">
                                <span class='material-icons'>settings</span>
                            </a></li>
                        </ul>
                    </nav>
                    <section id='achievements' class='page' style='display:none;'>
                        <h2>Trophies</h2>
                        <p>Coming soon...</p>
                    </section>
                    <section id='tournaments' class='page' style='display:none;'>
                        <h2>Tournaments</h2>
                        <button id='create-tournament-btn' onclick="showPage('tournament-create', event)">Create Tournament</button>
                        <section id='tournament-filters' style='margin-top:1rem;'>
                            <h3>Filter</h3>
                            <div id='tournament-filter-buttons'>
                                <button class='tournament-filter-btn secondary' data-range='today'>Today</button>
                                <button class='tournament-filter-btn secondary' data-range='next7'>Next 7 Days</button>
                                <button class='tournament-filter-btn secondary' data-range='next30'>Next 30 Days</button>
                                <button class='tournament-filter-btn secondary' data-range='all'>All</button>
                            </div>
                        </section>
                        <section id='my-tournaments'>
                            <h3>My Tournaments</h3>
                            <ul id='owned-tournaments'></ul>
                        </section>
                        <section id='joined-tournaments'>
                            <h3>Joined Tournaments</h3>
                            <ul id='joined-tournaments-list'></ul>
                        </section>
                        <section id='public-tournaments'>
                            <h3>Public Tournaments</h3>
                            <ul id='public-tournaments-list'></ul>
                        </section>
                    </section>
                    <section id='tournament-create' class='page' style='display:none;'>
                        <h2>Create Tournament</h2>
                        <form id='tournament-form'>
                            <label for='tournament-name'>Name</label>
                            <input id='tournament-name' type='text' required>
                            <label for='tournament-start'>Start Time</label>
                            <input id='tournament-start' type='datetime-local' required>
                            <label for='tournament-rules'>Rule Set</label>
                            <select id='tournament-rules'>
                                <option value='single-elimination'>Single Elimination</option>
                                <option value='double-elimination'>Double Elimination</option>
                                <option value='round-robin'>Round Robin</option>
                            </select>
                            <label class='switch'>
                                <input id='tournament-public' type='checkbox'>
                                Public Tournament
                            </label>
                            <label class='switch'>
                                <input id='tournament-invites' type='checkbox'>
                                Allow Invites
                            </label>
                            <footer class='grid'>
                                <button type='submit'>Create Tournament</button>
                                <button type='button' class='secondary' onclick="showPage('tournaments', event)">Cancel</button>
                            </footer>
                        </form>
                    </section>
                    <section id='tournament-manage' class='page' style='display:none;'>
                        <h2>Manage Tournament</h2>
                        <p id='tournament-manage-name'></p>
                        <label class='switch'>
                            <input id='allow-invites' type='checkbox'>
                            Allow Invites
                        </label>
                        <button id='share-tournament' style='display:none;'>Invite Players</button>
                        <h3>Registered Users</h3>
                        <ul id='registered-users'></ul>
                        <h3>Joined Users</h3>
                        <ul id='joined-users'></ul>
                    </section>
                    <section id='tournament-view' class='page' style='display:none;'>
                        <h2 id='tournament-view-name'></h2>
                        <p id='tournament-view-start'></p>
                        <button id='tournament-view-action'>Join Tournament</button>
                    </section>
                    <section id='friends' class='page' style='display:none;'>
                        <h2>Friends</h2>
                        <p>Coming soon...</p>
                    </section>
                    <section id='map' class='page' style='display:none;'>
                        <h2>Nearby Arcades</h2>
                        <p>Coming soon...</p>
                    </section>
                    <section id='shop' class='page' style='display:none;'>
                        <h2>Shop</h2>
                        <p>Coming soon...</p>
                    </section>
                    <section id='inventory' class='page' style='display:none;'>
                        <h2>Inventory / Avatar Builder</h2>
                        <p>Coming soon...</p>
                    </section>
                    <section id='play' class='page' style='display:none;'>
                        <h2>Play a Game</h2>
                        <p>Coming soon...</p>
                    </section>
                    <section id='settings' class='page' style='display:none;'>
                        <h2>Settings</h2>
                        <h3>Appearance</h3>
                        <label class='switch' style='margin-bottom:1rem;'>
                            <input id='theme-toggle' type='checkbox' role='switch' onchange='toggleTheme()' checked>
                            Dark Mode
                        </label>
                        <h3>Account</h3>
                        <button onclick="document.getElementById('password-dialog').showModal()" style='width:fit-content;margin-bottom:0.5rem;'>Change Password</button>
                        <div class='grid' style='grid-template-columns:1fr 1fr;gap:0.5rem;margin-bottom:0.5rem;'>
                            <button onclick='logout()' aria-label='Logout' class='secondary outline' style='display:flex;align-items:center;gap:0.25rem;'>
                                <span class='material-icons'>logout</span><span>Logout</span>
                            </button>
                            <button onclick='openDeleteConfirm()' class='secondary outline'>Delete Account</button>
                        </div>
                        <h3>My Locations</h3>
                        <div id='locations-list'></div>
                        <button id='add-location-btn' style='width:fit-content;margin-bottom:0.5rem;'>Add Location</button>
                        <h3>Machines</h3>
                        <ul id='machines-list'></ul>
                        <p style='text-align:center;margin-top:1rem;font-size:0.9rem;'>Version {{ version }}</p>
                    </section>
                    <section id='location-detail' class='page' style='display:none;'>
                        <h2 id='location-detail-title'>Add Location</h2>
                        <form id='location-detail-form'>
                            <input id='detail-name' placeholder='Name' required />
                            <input id='detail-address' placeholder='Address' />
                            <input id='detail-website' type='url' placeholder='Website' />
                            <input id='detail-hours' placeholder='Hours' />
                            <button type='submit'>Save</button>
                        </form>
                        <h3>Machines</h3>
                        <ul id='location-machines-list'></ul>
                    </section>
                </section>
                <div id='toast' class='toast' style='display:none;position:fixed;top:1rem;left:50%;transform:translateX(-50%);background:#333;color:white;padding:0.5rem 1rem;border-radius:4px;z-index:2000;max-width:75vw;width:max-content;text-align:center;'></div>
                <div id='account-overlay'>
                    <button id='account-close' aria-label='Close'><span class='material-icons'>close</span></button>
                    <div id='account-actions'>
                        <button id='account-save' aria-label='Save'><span class='material-icons'>save</span></button>
                    </div>
                    <picture>
                        <source srcset='/static/img/logo.webp' type='image/webp'>
                        <img id='account-avatar' src='/static/img/logo.png' alt='Profile picture' style='width:8rem;height:8rem;border-radius:50%;margin:1rem auto 0.5rem;transition:transform 0.3s;'>
                    </picture>
                    <label for='account-screen' style='display:block;margin:0 auto 0.5rem;width:90%;text-align:left;'>
                        <span style='display:block;margin-bottom:0.25rem;'>Screen name</span>
                        <input id='account-screen' type='text' style='width:100%;'>
                    </label>
                </div>
            </main>
        </body>
    </html>
