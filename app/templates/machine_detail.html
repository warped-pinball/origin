<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>{{ machine.game_title or machine.id }} Â· Origin</title>
    <link rel='stylesheet' href='/static/css/pico.min.css'>
    <link rel='stylesheet' href='/static/css/style.css'>
    <link rel="icon" type="image/png" href="/static/img/logo.png">
  </head>
  <body>
    <main class="container" style="padding-top:2rem;padding-bottom:3rem;">
      <header style="margin-bottom:2rem;">
        <h1 style="margin-bottom:0.25rem;">{{ machine.game_title or machine.id }}</h1>
        {% if machine.location %}
        <p style="margin:0;color:var(--muted-color);">{{ machine.location.name }}</p>
        {% endif %}
      </header>
      <section aria-labelledby="scoreboard-heading" style="margin-bottom:2rem;">
        <h2 id="scoreboard-heading" style="margin-bottom:0.75rem;">Latest scores</h2>
        <p id="scoreboard-updated" class="scoreboard-updated" style="display:none;"></p>
        <div id="scoreboard-empty" class="notice" role="status" style="display:none;">No scores have been reported yet.</div>
        <ul id="scoreboard-list" class="machine-score-list"></ul>
        <div class="grid" style="grid-template-columns:repeat(auto-fit,minmax(12rem,1fr));gap:0.75rem;margin-top:1rem;">
          <button type="button" id="refresh-scores" class="secondary outline">Refresh scores</button>
          <button type="button" id="toggle-select" class="secondary outline" style="display:none;">Select players</button>
        </div>
      </section>
      <section aria-labelledby="claim-heading" id="claim-section" style="display:none;margin-bottom:2rem;">
        <h2 id="claim-heading" style="margin-bottom:0.75rem;">Claim my scores</h2>
        <p style="margin-bottom:0.75rem;">Choose the players you controlled in the latest game to add those scores to your Origin profile.</p>
        <form id="claim-form" class="claim-form">
          <div id="claim-options" class="claim-options"></div>
          <button type="submit">Save my scores</button>
        </form>
      </section>
      <section aria-labelledby="qr-heading" style="margin-bottom:2rem;">
        <h2 id="qr-heading" style="margin-bottom:0.75rem;">Machine QR code</h2>
        <p style="margin-bottom:0.75rem;">Share this link with players so they can claim their scores:</p>
        <div class="machine-qr-card">
          <code id="machine-qr-link"></code>
          <div class="grid" style="grid-template-columns:repeat(auto-fit,minmax(10rem,1fr));gap:0.5rem;margin-top:0.75rem;">
            <button type="button" id="copy-machine-link" class="secondary outline">Copy link</button>
            <a id="open-machine-link" class="secondary outline" target="_blank" rel="noopener noreferrer">Open in new tab</a>
          </div>
        </div>
      </section>
      <footer style="margin-top:3rem;text-align:center;color:var(--muted-color);font-size:0.9rem;">
        Version {{ version }}
      </footer>
    </main>
    <div id='toast' class='toast' style='display:none;position:fixed;top:1rem;left:50%;transform:translateX(-50%);background:#333;color:white;padding:0.5rem 1rem;border-radius:4px;z-index:2000;max-width:75vw;width:max-content;text-align:center;'></div>
    <script>window.API_BASE = {{ api_base | tojson }};window.machineConfig = {{ machine_config | tojson }};</script>
    <script src="/static/js/http.js" defer></script>
    <script src="/static/js/api.js" defer></script>
    <script src="/static/js/machine.js" defer></script>
  </body>
</html>
